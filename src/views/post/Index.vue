<template>
  <div>
    
    <div class="box">
       {{equipment}}
      <el-row>
        <el-col :span="8">
          <div style="padding-left: 5px;">
            ğŸ””æŒ‰å‰§æƒ…æ‰¾å¥½çœ‹çš„ç”µå½±
          </div>
          <div class="kongzhia">
            <a @click="cc('')" title="ç”µå½±å¤©å ‚">å…¨éƒ¨</a>
            <a @click="cc('å–œå‰§')" title='å–œå‰§ç”µå½±' >å–œå‰§<i class="s-hot-icon"></i></a>
            <a @click="cc('çˆ±æƒ…')" title='çˆ±æƒ…ç”µå½±' >çˆ±æƒ…</a>
            <a @click="cc('åŠ¨ä½œ')" title='åŠ¨ä½œç”µå½±' >åŠ¨ä½œ<i class="s-hot-icon"></i></a>
            <a @click="cc('ææ€–')" title='ææ€–ç”µå½±' >ææ€–</a>
            <a @click="cc('ç§‘å¹»')" title='ç§‘å¹»ç”µå½±' >ç§‘å¹»</a>
            <a @click="cc('å‰§æƒ…')" title='å‰§æƒ…ç”µå½±' >å‰§æƒ…</a>
            <a @click="cc('çŠ¯ç½ª')" title='çŠ¯ç½ªç”µå½±' >çŠ¯ç½ª</a>
            <a @click="cc('å¥‡å¹»')" title='å¥‡å¹»ç”µå½±' >å¥‡å¹»</a>
            <a @click="cc('æˆ˜äº‰')" title='æˆ˜äº‰ç”µå½±' >æˆ˜äº‰<i class="s-hot-icon"></i></a>
            <a @click="cc('æ‚¬ç–‘')" title='æ‚¬ç–‘ç”µå½±' >æ‚¬ç–‘</a>
            <a @click="cc('åŠ¨ç”»')" title='åŠ¨ç”»ç”µå½±' >åŠ¨ç”»</a>
            <a @click="cc('æˆäºº')" title='æˆäººç”µå½±' >æˆäºº<i class="s-hot-icon"></i></a>
            <a @click="cc('å¤è£…')" title='å¤è£…ç”µå½±' >å¤è£…</a>
            <a @click="cc('å†å²')" title='å†å²ç”µå½±' >å†å²</a>
            <a @click="cc('æƒŠæ‚š')" title='æƒŠæ‚šç”µå½±' >æƒŠæ‚š</a>
          </div>
        </el-col>
        <el-col :span="8" style="border-left: 1px solid #e2e2e2;">
          <div style="padding-left: 5px;">
            ğŸ””æŒ‰å¹´ä»½æ‰¾å¥½çœ‹çš„ç”µå½±
          </div>
          <div class="kongzhia">
            <a @click="dd('')" title="ç”µå½±å¤©å ‚">å…¨éƒ¨</a>
            <a @click="dd('2021')" title='2021ç”µå½±' v-text="21 + 'å¹´'"></a>
            <a @click="dd('2020')" title='2020ç”µå½±' v-text="20 + 'å¹´'"></a>
            <a @click="dd('2019')" title='2019ç”µå½±' v-text="19 + 'å¹´'"></a>
            <a @click="dd('2018')" title='2018ç”µå½±' v-text="18 + 'å¹´'"></a>
            <a @click="dd('2017')" title='2017ç”µå½±' v-text="17 + 'å¹´'"></a>
            <a @click="dd('2016')" title='2016ç”µå½±' v-text="16 + 'å¹´'"></a>
            <a @click="dd('2015')" title='2015ç”µå½±' v-text="15 + 'å¹´'"></a>
            <a @click="dd('2014')" title='2014ç”µå½±' v-text="14 + 'å¹´'"></a>
            <a @click="dd('2013')" title='2013ç”µå½±' v-text="13 + 'å¹´'"></a>
            <a @click="dd('2012')" title='2012ç”µå½±' v-text="12 + 'å¹´'"></a>
            <a @click="dd('2011')" title='2011ç”µå½±' v-text="11 + 'å¹´'"></a>
            <a @click="dd('2011')" title='2011ç”µå½±' v-text="10 + 'å¹´'"></a>
          </div>
        </el-col>
        <el-col :span="8" style="border-left: 1px solid #e2e2e2;">
          <div style="padding-left: 5px;">
            ğŸ””æŒ‰åœ°åŒºæ‰¾å¥½çœ‹çš„ç”µå½±
          </div>
          <div class="kongzhia">
            <a  @click="ee('')" title="ç”µå½±å¤©å ‚">å…¨éƒ¨</a>
            <a  @click="ee('ç¾å›½')" title='ç¾å›½ç”µå½±'>ç¾å›½</a>
            <a  @click="ee('å¤§é™†')" title='å¤§é™†ç”µå½±'>å¤§é™†</a>
            <a  @click="ee('ä¸­å›½é¦™æ¸¯')" title='ä¸­å›½é¦™æ¸¯ç”µå½±'>ä¸­å›½é¦™æ¸¯</a>
            <a  @click="ee('éŸ©å›½')" title='éŸ©å›½ç”µå½±'>éŸ©å›½</a>
            <a  @click="ee('æ—¥æœ¬')" title='æ—¥æœ¬ç”µå½±'>æ—¥æœ¬</a>
            <a  @click="ee('æ³•å›½')" title='æ³•å›½ç”µå½±'>æ³•å›½</a>
            <a  @click="ee('è‹±å›½')" title='è‹±å›½ç”µå½±'>è‹±å›½</a>
            <a  @click="ee('å¾·å›½')" title='å¾·å›½ç”µå½±'>å¾·å›½</a>
            <a  @click="ee('ä¸­å›½å°æ¹¾')" title='ä¸­å›½å°æ¹¾ç”µå½±'>ä¸­å›½å°æ¹¾</a>
            <a  @click="ee('æ³°å›½')" title='æ³°å›½ç”µå½±'>æ³°å›½</a>
            <a  @click="ee('å°åº¦')" title='å°åº¦ç”µå½±'>å°åº¦</a>
          </div>
        </el-col>
      </el-row>
    </div>


    <el-card shadow="never">
      <div slot="header" class="clearfix">
        <el-tabs v-model="activeName" @tab-click="handleClick">
          
          <el-tab-pane label="ç”µå½±ä¸“åŒº" name="latest">
            <el-row :gutter="20" >

              <el-col :span="equipment == true ? 8 : 4" v-for="(item, index) in tableData" :key="index" style="padding-top:10px;">
                <router-link :to="{path:'/vod/'+item.fid}">
                  <div class="father">
                    
                    <span class="score">è±†ç“£{{item.filmRatings}}åˆ†</span>
                    <img :src="item.filmCover" style="width:300px; height:200px;">
                  </div>
                  <div>
                    <span class="cl1"><h5>{{item.filmName}}</h5></span>
                    <div class="text-muted" v-if="!equipment">
                      ä¸»æ¼”ï¼š{{item.filmPerformer | ellipsis}}
                    </div>
                    <div class="text-muted" v-else>
                      ä¸»æ¼”ï¼š{{item.filmPerformer | ellipsisb}}
                    </div>
                  </div>
                  </router-link>
              </el-col>
          </el-row>

           <div style="padding-left: 30%;padding-top: 10px;">
             <el-pagination
              @size-change="handleSizeChange"
              @current-change="handleCurrentChange"
              :current-page="currentPage4"
              :page-sizes="[24, 30, 36, 42]"
              :page-size="24"
              layout="total, sizes, prev, pager, next, jumper"
              :total="totalCount">
            </el-pagination>
           </div>


          <!-- {{tableData}} -->
         
          </el-tab-pane>

          <el-tab-pane label="ç³»ç»Ÿè®ºå›" name="">
            <el-row :gutter="20">
              <el-col :span="equipment == false ? 16 : 20">
                <article v-for="(item, index) in articleList" :key="index" class="media">
                  <div class="media-left">
                    <figure class="image is-48x48">
                      <img :src="`https://cn.gravatar.com/avatar/${item.userId}?s=164&d=monsterid`" style="border-radius: 5px;">
                    </figure>
                  </div>
                  <div class="media-content">
                    <div class="">
                      <p class="ellipsis is-ellipsis-1">
                        <el-tooltip class="item" effect="dark" :content="item.title" placement="top">
                          <router-link :to="{name:'post-detail',params:{id:item.id}}">
                            <span class="is-size-6">{{ item.title }}</span>
                          </router-link>
                        </el-tooltip>
                      </p>
                    </div>
                    <nav class="level has-text-grey is-mobile  is-size-7 mt-2">
                      <div class="level-left">
                        <div class="level-left">
                          <router-link class="level-item" :to="{ path: `/member/${item.username}/home` }">
                            {{ item.alias }}
                          </router-link>

                          <span class="mr-1">
                            å‘å¸ƒäº:{{ dayjs(item.createTime).format("YYYY/MM/DD") }}
                          </span>

                          <span
                            v-for="(tag, index) in item.tags"
                            :key="index"
                            class="tag is-hidden-mobile is-success is-light mr-1"
                          >
                            <router-link :to="{ name: 'tag', params: { name: tag.name } }">
                              {{ "#" + tag.name }}
                            </router-link>
                          </span>

                          <span class="is-hidden-mobile">æµè§ˆ:{{ item.view }}</span>
                        </div>
                      </div>
                    </nav>
                  </div>
                  <div class="media-right" />
                </article>
              </el-col>
              <el-col :span="8" v-if="!equipment">
                <div class="column">
                  <CardBar></CardBar>
                </div>
              </el-col>
            </el-row>
          </el-tab-pane>
        </el-tabs>
      </div>
      
      
      <!--åˆ†é¡µ-->
      <div class="box">

        <div style="padding-left: 25%;padding-top: 10px;" v-if="!equipment">
          <pagination
            v-show="page.total > 0"
            :total="page.total"
            :page.sync="page.current"
            :limit.sync="page.size"
            @pagination="init"
          />
        </div>

        <div v-else>
          <el-pagination
            @size-change="handleSizeChange"
            @current-change="handleCurrentChange"
            :current-page.sync="currentPage1"
            :page-size="24"
            layout="total, prev, pager, next"
            :total="totalCount">
          </el-pagination>
        </div>

      </div>
      
    </el-card>
  </div>
</template>

<script>
import { getList } from '@/api/post'
import Pagination from '@/components/Pagination'
import {  queryfilmPage  } from '@/api/site'
import CardBar from "@/views/card/CardBar"

export default {
  name: 'TopicList',
  components: { Pagination , CardBar },
  data() {
    return {
      activeName: 'latest',
      articleList: [],
      formInline : {
        "pageNum" : 1,
        "pageSize" : 24
      },
      page: {
        current: 1,
        size: 10,
        total: 0,
        tab: 'latest'
      },
      tableData : [],
      totalCount : 0,
      equipment : false //false ä¸ºç”µè„‘ 
    }
  },
  filters: {
    // å½“æ ‡é¢˜å­—æ•°è¶…å‡ºæ—¶ï¼Œè¶…å‡ºéƒ¨åˆ†æ˜¾ç¤ºâ€™...â€˜ã€‚æ­¤å¤„é™åˆ¶è¶…å‡º8ä½å³è§¦å‘éšè—æ•ˆæœ
      ellipsis (value) {
          if (!value) return ''
          if (value.length > 7) {
              return value.slice(0, 7) + '...'
          }
          return value
      },
      ellipsisb (value) {
          if (!value) return ''
          if (value.length > 5) {
              return value.slice(0, 4) + '...'
          }
          return value
      }
  },
  created() {
    this.FilmFromSearch()
    this.panduan()
    this.equipment = /Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent) ? true :  flase;
  },
  methods: {
    async panduan() {
      let {data:baseRefault} = await getList(1,6)
      this.articleList = baseRefault.records
    },
    async FilmFromSearch(){
        let { data:baseRefault} = await queryfilmPage(this.formInline)
        this.tableData = baseRefault.dataList;
        this.totalCount = baseRefault.totalCount
    },
    handleClick(tab) {
      this.init(tab.name)
    },
     handleSizeChange(val) {
      this.formInline.pageNum = 1
      this.formInline.pageSize = val
      this.FilmFromSearch()
    },
    handleCurrentChange(val) {
      this.formInline.pageNum = val
      this.FilmFromSearch()
    },
    cc(type){
      this.formInline.filmType = type
      this.FilmFromSearch()
    },
    dd(time){
      this.formInline.filmShowTime = time
      this.FilmFromSearch()
    },
    ee(addr) {
      this.formInline.filmCountry = addr
      this.FilmFromSearch()
    }
  }
}
</script>

<style scoped>
   .score {
    position: absolute;
    padding: 0 5px;
    text-align: right;
    font-size: 12px;
    background-color: #d9cbcb;
  }
  .text-muted {
    margin-top: 5px;
    font-size: 12px;
    overflow: hidden;
  }
  .father {
        width: 100%;
        height: 100%;
        background-color: #eee;
        margin: 0px auto;
        position: relative;
        overflow: hidden;
    }
  .kongzhia a {
    padding-left: 5px;
    font-weight: 400;
    margin-top: 5px;
  }
</style>
